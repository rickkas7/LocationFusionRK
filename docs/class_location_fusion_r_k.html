<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LocationFusionRK: LocationFusionRK Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LocationFusionRK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a>  </div>
  <div class="headertitle"><div class="title">LocationFusionRK Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_location_fusion_r_k_8h_source.html">LocationFusionRK.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_location_fusion_r_k_1_1_cmd_handler.html">CmdHandler</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class is used internally for registerCommand.  <a href="struct_location_fusion_r_k_1_1_cmd_handler.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aa45c9ec7a5974e9d4eb277134ec5fe0b" id="r_aa45c9ec7a5974e9d4eb277134ec5fe0b"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa45c9ec7a5974e9d4eb277134ec5fe0b">PublishFrequency</a> { <a class="el" href="#aa45c9ec7a5974e9d4eb277134ec5fe0ba3c78b35502b2693fefdfc51cba3a53a5">manual</a>
, <a class="el" href="#aa45c9ec7a5974e9d4eb277134ec5fe0bae2eff6c2dafd909df8508f891b385d88">once</a>
, <a class="el" href="#aa45c9ec7a5974e9d4eb277134ec5fe0bae6ffdec5e14fce371eb7ae99edebbbee">periodic</a>
 }</td></tr>
<tr class="memdesc:aa45c9ec7a5974e9d4eb277134ec5fe0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">How often to publish location.  <a href="#aa45c9ec7a5974e9d4eb277134ec5fe0b">More...</a><br /></td></tr>
<tr class="separator:aa45c9ec7a5974e9d4eb277134ec5fe0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae3286ce07f8b3080f3e7382cf6d1660d" id="r_ae3286ce07f8b3080f3e7382cf6d1660d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae3286ce07f8b3080f3e7382cf6d1660d">setup</a> ()</td></tr>
<tr class="memdesc:ae3286ce07f8b3080f3e7382cf6d1660d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform setup operations; call this from global application <a class="el" href="#ae3286ce07f8b3080f3e7382cf6d1660d" title="Perform setup operations; call this from global application setup()">setup()</a>  <br /></td></tr>
<tr class="separator:ae3286ce07f8b3080f3e7382cf6d1660d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82b57c739d7e61b12fdb3c9533b20b20" id="r_a82b57c739d7e61b12fdb3c9533b20b20"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a82b57c739d7e61b12fdb3c9533b20b20">withPublishManual</a> ()</td></tr>
<tr class="memdesc:a82b57c739d7e61b12fdb3c9533b20b20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the publish frequency to manual. Call <a class="el" href="#a74a14902b67f73f700ea8984588046b3" title="Request a publish now.">requestPublish()</a> to do so. This is the default.  <br /></td></tr>
<tr class="separator:a82b57c739d7e61b12fdb3c9533b20b20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a5992b6ec9e8b024f0311800b1d084b" id="r_a2a5992b6ec9e8b024f0311800b1d084b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2a5992b6ec9e8b024f0311800b1d084b">withPublishOnce</a> ()</td></tr>
<tr class="memdesc:a2a5992b6ec9e8b024f0311800b1d084b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the publish frequency to publish once after connecting to the cloud.  <br /></td></tr>
<tr class="separator:a2a5992b6ec9e8b024f0311800b1d084b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a535ed2c03358f337256ccb406c7531fa" id="r_a535ed2c03358f337256ccb406c7531fa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a535ed2c03358f337256ccb406c7531fa">withPublishPeriodic</a> (std::chrono::milliseconds ms)</td></tr>
<tr class="memdesc:a535ed2c03358f337256ccb406c7531fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the publish frequency to publish periodically when cloud connected.  <br /></td></tr>
<tr class="separator:a535ed2c03358f337256ccb406c7531fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fe57c4e11fd7b62e0d9da344b8d7d4d" id="r_a6fe57c4e11fd7b62e0d9da344b8d7d4d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#aa45c9ec7a5974e9d4eb277134ec5fe0b">PublishFrequency</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6fe57c4e11fd7b62e0d9da344b8d7d4d">getPublishFrequency</a> () const</td></tr>
<tr class="memdesc:a6fe57c4e11fd7b62e0d9da344b8d7d4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current publish frequency. Default is manual.  <br /></td></tr>
<tr class="separator:a6fe57c4e11fd7b62e0d9da344b8d7d4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7eca9c5b034b4143de9c95ef8a316dd8" id="r_a7eca9c5b034b4143de9c95ef8a316dd8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7eca9c5b034b4143de9c95ef8a316dd8">withAddWiFi</a> (bool enable=true)</td></tr>
<tr class="memdesc:a7eca9c5b034b4143de9c95ef8a316dd8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add Wi-Fi access points nearby to the loc event. Default is false.  <br /></td></tr>
<tr class="separator:a7eca9c5b034b4143de9c95ef8a316dd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b68a745a1785282803db05f630fd294" id="r_a7b68a745a1785282803db05f630fd294"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7b68a745a1785282803db05f630fd294">withAddTower</a> (bool enable=true)</td></tr>
<tr class="memdesc:a7b68a745a1785282803db05f630fd294"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add serving cellular tower information to the loc event. Default is false.  <br /></td></tr>
<tr class="separator:a7b68a745a1785282803db05f630fd294"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34e181d49b3d20d64eb44ac2124fa8d7" id="r_a34e181d49b3d20d64eb44ac2124fa8d7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a34e181d49b3d20d64eb44ac2124fa8d7">withAddToEventHandler</a> (std::function&lt; void(Variant &amp;<a class="el" href="#a50aee379b3a94af0ab1649d60b46968f">eventData</a>, Variant &amp;locVariant)&gt; handler)</td></tr>
<tr class="memdesc:a34e181d49b3d20d64eb44ac2124fa8d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add an "add to event" handler.  <br /></td></tr>
<tr class="separator:a34e181d49b3d20d64eb44ac2124fa8d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44dae3b646645b8eb162e7b1a33ed12f" id="r_a44dae3b646645b8eb162e7b1a33ed12f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a44dae3b646645b8eb162e7b1a33ed12f">withCmdHandler</a> (const char *cmd, std::function&lt; void(const Variant &amp;data)&gt; handler)</td></tr>
<tr class="memdesc:a44dae3b646645b8eb162e7b1a33ed12f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a handler when the Particle function "cmd" is received.  <br /></td></tr>
<tr class="separator:a44dae3b646645b8eb162e7b1a33ed12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7eb11317b27c7177160883245a2ed08c" id="r_a7eb11317b27c7177160883245a2ed08c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7eb11317b27c7177160883245a2ed08c">withLocEnhancedHandler</a> (std::function&lt; void(const Variant &amp;data)&gt; handler)</td></tr>
<tr class="memdesc:a7eb11317b27c7177160883245a2ed08c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a handler when loc-enhanced data is calculated by the cloud.  <br /></td></tr>
<tr class="separator:a7eb11317b27c7177160883245a2ed08c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74a14902b67f73f700ea8984588046b3" id="r_a74a14902b67f73f700ea8984588046b3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a74a14902b67f73f700ea8984588046b3">requestPublish</a> ()</td></tr>
<tr class="memdesc:a74a14902b67f73f700ea8984588046b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request a publish now.  <br /></td></tr>
<tr class="separator:a74a14902b67f73f700ea8984588046b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a383b25eb9fab626ea3be28036f27c78d" id="r_a383b25eb9fab626ea3be28036f27c78d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a383b25eb9fab626ea3be28036f27c78d">lock</a> ()</td></tr>
<tr class="memdesc:a383b25eb9fab626ea3be28036f27c78d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locks the mutex that protects shared resources.  <br /></td></tr>
<tr class="separator:a383b25eb9fab626ea3be28036f27c78d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c394f8103493e13f361085c31bbbc0f" id="r_a1c394f8103493e13f361085c31bbbc0f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1c394f8103493e13f361085c31bbbc0f">tryLock</a> ()</td></tr>
<tr class="memdesc:a1c394f8103493e13f361085c31bbbc0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to lock the mutex that protects shared resources.  <br /></td></tr>
<tr class="separator:a1c394f8103493e13f361085c31bbbc0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75194fb673b633de982ccd85a6905e6f" id="r_a75194fb673b633de982ccd85a6905e6f"><td class="memItemLeft" align="right" valign="top"><a id="a75194fb673b633de982ccd85a6905e6f" name="a75194fb673b633de982ccd85a6905e6f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>unlock</b> ()</td></tr>
<tr class="memdesc:a75194fb673b633de982ccd85a6905e6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlocks the mutex that protects shared resources. <br /></td></tr>
<tr class="separator:a75194fb673b633de982ccd85a6905e6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a632cb3bb761719e876e6749e7f83fbee" id="r_a632cb3bb761719e876e6749e7f83fbee"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a632cb3bb761719e876e6749e7f83fbee">instance</a> ()</td></tr>
<tr class="memdesc:a632cb3bb761719e876e6749e7f83fbee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the singleton instance of this class, allocating it if necessary.  <br /></td></tr>
<tr class="separator:a632cb3bb761719e876e6749e7f83fbee"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:afdf4179c27be69b7e7b4b23a2f262854" id="r_afdf4179c27be69b7e7b4b23a2f262854"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afdf4179c27be69b7e7b4b23a2f262854">LocationFusionRK</a> ()</td></tr>
<tr class="memdesc:afdf4179c27be69b7e7b4b23a2f262854"><td class="mdescLeft">&#160;</td><td class="mdescRight">The constructor is protected because the class is a singleton.  <br /></td></tr>
<tr class="separator:afdf4179c27be69b7e7b4b23a2f262854"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20a39475be3aab2de57b22513ad287bb" id="r_a20a39475be3aab2de57b22513ad287bb"><td class="memItemLeft" align="right" valign="top"><a id="a20a39475be3aab2de57b22513ad287bb" name="a20a39475be3aab2de57b22513ad287bb"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><b>~LocationFusionRK</b> ()</td></tr>
<tr class="memdesc:a20a39475be3aab2de57b22513ad287bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The destructor is protected because the class is a singleton and cannot be deleted. <br /></td></tr>
<tr class="separator:a20a39475be3aab2de57b22513ad287bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9243e6dd0fc2f53d3f187584196e908f" id="r_a9243e6dd0fc2f53d3f187584196e908f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9243e6dd0fc2f53d3f187584196e908f">LocationFusionRK</a> (const <a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp;)=delete</td></tr>
<tr class="separator:a9243e6dd0fc2f53d3f187584196e908f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a7ac263c0d90bba2c37a1637c7ab050" id="r_a4a7ac263c0d90bba2c37a1637c7ab050"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4a7ac263c0d90bba2c37a1637c7ab050">operator=</a> (const <a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp;)=delete</td></tr>
<tr class="separator:a4a7ac263c0d90bba2c37a1637c7ab050"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2383f534b6d500ae979ab994ab3df5d" id="r_ae2383f534b6d500ae979ab994ab3df5d"><td class="memItemLeft" align="right" valign="top">os_thread_return_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae2383f534b6d500ae979ab994ab3df5d">threadFunction</a> (void)</td></tr>
<tr class="memdesc:ae2383f534b6d500ae979ab994ab3df5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Worker thread function.  <br /></td></tr>
<tr class="separator:ae2383f534b6d500ae979ab994ab3df5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1df19422c23ef16c507e892f075771e" id="r_ae1df19422c23ef16c507e892f075771e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae1df19422c23ef16c507e892f075771e">stateIdle</a> ()</td></tr>
<tr class="memdesc:ae1df19422c23ef16c507e892f075771e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal state handler for idle and not connected to the cloud.  <br /></td></tr>
<tr class="separator:ae1df19422c23ef16c507e892f075771e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c3a416dd4740cb296ae7c1160b17564" id="r_a8c3a416dd4740cb296ae7c1160b17564"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8c3a416dd4740cb296ae7c1160b17564">stateConnected</a> ()</td></tr>
<tr class="memdesc:a8c3a416dd4740cb296ae7c1160b17564"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal state handler for connected to the cloud.  <br /></td></tr>
<tr class="separator:a8c3a416dd4740cb296ae7c1160b17564"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b030c426ea722da6b308456a0148a98" id="r_a7b030c426ea722da6b308456a0148a98"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7b030c426ea722da6b308456a0148a98">stateBuildPublish</a> ()</td></tr>
<tr class="memdesc:a7b030c426ea722da6b308456a0148a98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal state handler for building a publish.  <br /></td></tr>
<tr class="separator:a7b030c426ea722da6b308456a0148a98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44fa7eb853ebc65e7f0cebab693d6a67" id="r_a44fa7eb853ebc65e7f0cebab693d6a67"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a44fa7eb853ebc65e7f0cebab693d6a67">statePublishWait</a> ()</td></tr>
<tr class="memdesc:a44fa7eb853ebc65e7f0cebab693d6a67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal state handler for waiting for the publish to complete.  <br /></td></tr>
<tr class="separator:a44fa7eb853ebc65e7f0cebab693d6a67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af79526582bb04bd28357e932cdd3f0d1" id="r_af79526582bb04bd28357e932cdd3f0d1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af79526582bb04bd28357e932cdd3f0d1">functionHandler</a> (const Variant &amp;<a class="el" href="#a50aee379b3a94af0ab1649d60b46968f">eventData</a>)</td></tr>
<tr class="memdesc:af79526582bb04bd28357e932cdd3f0d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called from the Particle.function handler for "cmd".  <br /></td></tr>
<tr class="separator:af79526582bb04bd28357e932cdd3f0d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2f111aec7b2af98c576870c7e88f515" id="r_af2f111aec7b2af98c576870c7e88f515"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af2f111aec7b2af98c576870c7e88f515">locEnhanced</a> (const Variant &amp;<a class="el" href="#a50aee379b3a94af0ab1649d60b46968f">eventData</a>)</td></tr>
<tr class="memdesc:af2f111aec7b2af98c576870c7e88f515"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when a "loc-enhanced" cmd function is received.  <br /></td></tr>
<tr class="separator:af2f111aec7b2af98c576870c7e88f515"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-methods" name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:af6d35d19c2321cee9bf030b96dad83c4" id="r_af6d35d19c2321cee9bf030b96dad83c4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af6d35d19c2321cee9bf030b96dad83c4">functionHandlerStatic</a> (String cmd)</td></tr>
<tr class="memdesc:af6d35d19c2321cee9bf030b96dad83c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called from the Particle.function handler for "cmd".  <br /></td></tr>
<tr class="separator:af6d35d19c2321cee9bf030b96dad83c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae940bc78655511814de1e883d0156dfb" id="r_ae940bc78655511814de1e883d0156dfb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae940bc78655511814de1e883d0156dfb">locEnhancedStatic</a> (const Variant &amp;<a class="el" href="#a50aee379b3a94af0ab1649d60b46968f">eventData</a>)</td></tr>
<tr class="memdesc:ae940bc78655511814de1e883d0156dfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when a "loc-enhanced" cmd function is received.  <br /></td></tr>
<tr class="separator:ae940bc78655511814de1e883d0156dfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a633e5a7b022b24538bb78ad5a3147158" id="r_a633e5a7b022b24538bb78ad5a3147158"><td class="memItemLeft" align="right" valign="top">os_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a633e5a7b022b24538bb78ad5a3147158">mutex</a> = 0</td></tr>
<tr class="memdesc:a633e5a7b022b24538bb78ad5a3147158"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutex to protect shared resources.  <br /></td></tr>
<tr class="separator:a633e5a7b022b24538bb78ad5a3147158"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c267d646bf8b2255b776c9303a398fd" id="r_a8c267d646bf8b2255b776c9303a398fd"><td class="memItemLeft" align="right" valign="top">Thread *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8c267d646bf8b2255b776c9303a398fd">thread</a> = 0</td></tr>
<tr class="memdesc:a8c267d646bf8b2255b776c9303a398fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Worker thread instance class.  <br /></td></tr>
<tr class="separator:a8c267d646bf8b2255b776c9303a398fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60dc89f225abb59352bdd7960693287f" id="r_a60dc89f225abb59352bdd7960693287f"><td class="memItemLeft" align="right" valign="top"><a id="a60dc89f225abb59352bdd7960693287f" name="a60dc89f225abb59352bdd7960693287f"></a>
<a class="el" href="#aa45c9ec7a5974e9d4eb277134ec5fe0b">PublishFrequency</a>&#160;</td><td class="memItemRight" valign="bottom"><b>publishFrequency</b> = <a class="el" href="#aa45c9ec7a5974e9d4eb277134ec5fe0ba3c78b35502b2693fefdfc51cba3a53a5">PublishFrequency::manual</a></td></tr>
<tr class="memdesc:a60dc89f225abb59352bdd7960693287f"><td class="mdescLeft">&#160;</td><td class="mdescRight">How often to publish (manual, once, periodic) <br /></td></tr>
<tr class="separator:a60dc89f225abb59352bdd7960693287f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a917b4e015d2d91abbab01b2513911726" id="r_a917b4e015d2d91abbab01b2513911726"><td class="memItemLeft" align="right" valign="top"><a id="a917b4e015d2d91abbab01b2513911726" name="a917b4e015d2d91abbab01b2513911726"></a>
std::chrono::milliseconds&#160;</td><td class="memItemRight" valign="bottom"><b>publishPeriod</b> = 5min</td></tr>
<tr class="memdesc:a917b4e015d2d91abbab01b2513911726"><td class="mdescLeft">&#160;</td><td class="mdescRight">If publishing periodic, how often to publish. <br /></td></tr>
<tr class="separator:a917b4e015d2d91abbab01b2513911726"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a606fc2cc8aab8352897f024010460436" id="r_a606fc2cc8aab8352897f024010460436"><td class="memItemLeft" align="right" valign="top"><a id="a606fc2cc8aab8352897f024010460436" name="a606fc2cc8aab8352897f024010460436"></a>
std::chrono::milliseconds&#160;</td><td class="memItemRight" valign="bottom"><b>publishFailureRetry</b> = 1min</td></tr>
<tr class="memdesc:a606fc2cc8aab8352897f024010460436"><td class="mdescLeft">&#160;</td><td class="mdescRight">If publish fails, how long to wait before trying again. The location will be built again. <br /></td></tr>
<tr class="separator:a606fc2cc8aab8352897f024010460436"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab025b2c64172ba0fb6e43e609ecddaa6" id="r_ab025b2c64172ba0fb6e43e609ecddaa6"><td class="memItemLeft" align="right" valign="top"><a id="ab025b2c64172ba0fb6e43e609ecddaa6" name="ab025b2c64172ba0fb6e43e609ecddaa6"></a>
std::function&lt; void(<a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp;)&#160;</td><td class="memItemRight" valign="bottom"><b>stateHandler</b> ) = &amp;<a class="el" href="#ae1df19422c23ef16c507e892f075771e">LocationFusionRK::stateIdle</a></td></tr>
<tr class="memdesc:ab025b2c64172ba0fb6e43e609ecddaa6"><td class="mdescLeft">&#160;</td><td class="mdescRight">State handler. Run from the worker thread. <br /></td></tr>
<tr class="separator:ab025b2c64172ba0fb6e43e609ecddaa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf4ef5320b3453433656573eca5e2dce" id="r_adf4ef5320b3453433656573eca5e2dce"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adf4ef5320b3453433656573eca5e2dce">addWiFi</a> = false</td></tr>
<tr class="memdesc:adf4ef5320b3453433656573eca5e2dce"><td class="mdescLeft">&#160;</td><td class="mdescRight">When building a location publish, add Wi-Fi access point information.  <br /></td></tr>
<tr class="separator:adf4ef5320b3453433656573eca5e2dce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8c5ff303ac42e46642235fd96a576e2" id="r_ac8c5ff303ac42e46642235fd96a576e2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac8c5ff303ac42e46642235fd96a576e2">addTower</a> = false</td></tr>
<tr class="memdesc:ac8c5ff303ac42e46642235fd96a576e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">When building a location publish, add serving tower information.  <br /></td></tr>
<tr class="separator:ac8c5ff303ac42e46642235fd96a576e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43eb87aa2e5a709abf7c92400590dada" id="r_a43eb87aa2e5a709abf7c92400590dada"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::function&lt; void(Variant &amp;<a class="el" href="#a50aee379b3a94af0ab1649d60b46968f">eventData</a>, Variant &amp;locVariant)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a43eb87aa2e5a709abf7c92400590dada">addToEventHandlers</a> )</td></tr>
<tr class="memdesc:a43eb87aa2e5a709abf7c92400590dada"><td class="mdescLeft">&#160;</td><td class="mdescRight">Vector of handlers to add more information to the location event.  <br /></td></tr>
<tr class="separator:a43eb87aa2e5a709abf7c92400590dada"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa193b030f51eb82a0007b218bb0aa3d4" id="r_aa193b030f51eb82a0007b218bb0aa3d4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa193b030f51eb82a0007b218bb0aa3d4">enableCmdFunction</a> = true</td></tr>
<tr class="memdesc:aa193b030f51eb82a0007b218bb0aa3d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a function handler for "cmd".  <br /></td></tr>
<tr class="separator:aa193b030f51eb82a0007b218bb0aa3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9376d1527c8f483f9850bdf1778bdbc5" id="r_a9376d1527c8f483f9850bdf1778bdbc5"><td class="memItemLeft" align="right" valign="top"><a id="a9376d1527c8f483f9850bdf1778bdbc5" name="a9376d1527c8f483f9850bdf1778bdbc5"></a>
std::vector&lt; <a class="el" href="struct_location_fusion_r_k_1_1_cmd_handler.html">CmdHandler</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>commandHandlers</b></td></tr>
<tr class="memdesc:a9376d1527c8f483f9850bdf1778bdbc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler functions to call when a cmd Particle.function is received. <br /></td></tr>
<tr class="separator:a9376d1527c8f483f9850bdf1778bdbc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e9ef351f1d0f5b7a73ede721395d7f8" id="r_a3e9ef351f1d0f5b7a73ede721395d7f8"><td class="memItemLeft" align="right" valign="top"><a id="a3e9ef351f1d0f5b7a73ede721395d7f8" name="a3e9ef351f1d0f5b7a73ede721395d7f8"></a>
std::vector&lt; std::function&lt; void(const Variant &amp;<a class="el" href="#a50aee379b3a94af0ab1649d60b46968f">eventData</a>)&gt;&#160;</td><td class="memItemRight" valign="bottom"><b>locEnhancedHandlers</b> )</td></tr>
<tr class="memdesc:a3e9ef351f1d0f5b7a73ede721395d7f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler functions to call when loc-enhanced is received on-device. <br /></td></tr>
<tr class="separator:a3e9ef351f1d0f5b7a73ede721395d7f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa085ddc212e9c9b1350786e6308e18ea" id="r_aa085ddc212e9c9b1350786e6308e18ea"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa085ddc212e9c9b1350786e6308e18ea">manualPublishRequested</a> = false</td></tr>
<tr class="memdesc:aa085ddc212e9c9b1350786e6308e18ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">true when a manual publish has been requested  <br /></td></tr>
<tr class="separator:aa085ddc212e9c9b1350786e6308e18ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87f868ce610a3cd9e27b98e1fd3f9d3a" id="r_a87f868ce610a3cd9e27b98e1fd3f9d3a"><td class="memItemLeft" align="right" valign="top"><a id="a87f868ce610a3cd9e27b98e1fd3f9d3a" name="a87f868ce610a3cd9e27b98e1fd3f9d3a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>publishCount</b> = 0</td></tr>
<tr class="memdesc:a87f868ce610a3cd9e27b98e1fd3f9d3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of successful publishes. THis is used to handle once mode. <br /></td></tr>
<tr class="separator:a87f868ce610a3cd9e27b98e1fd3f9d3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad31268266674145ca6f63d95747829a5" id="r_ad31268266674145ca6f63d95747829a5"><td class="memItemLeft" align="right" valign="top"><a id="ad31268266674145ca6f63d95747829a5" name="ad31268266674145ca6f63d95747829a5"></a>
CloudEvent&#160;</td><td class="memItemRight" valign="bottom"><b>event</b></td></tr>
<tr class="memdesc:ad31268266674145ca6f63d95747829a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event being built or sent. <br /></td></tr>
<tr class="separator:ad31268266674145ca6f63d95747829a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50aee379b3a94af0ab1649d60b46968f" id="r_a50aee379b3a94af0ab1649d60b46968f"><td class="memItemLeft" align="right" valign="top"><a id="a50aee379b3a94af0ab1649d60b46968f" name="a50aee379b3a94af0ab1649d60b46968f"></a>
Variant&#160;</td><td class="memItemRight" valign="bottom"><b>eventData</b></td></tr>
<tr class="memdesc:a50aee379b3a94af0ab1649d60b46968f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The data payload being build for the loc event. <br /></td></tr>
<tr class="separator:a50aee379b3a94af0ab1649d60b46968f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa46dc6199f1eea119fd8dd52d9adf4f9" id="r_aa46dc6199f1eea119fd8dd52d9adf4f9"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa46dc6199f1eea119fd8dd52d9adf4f9">nextPublishMs</a> = 0</td></tr>
<tr class="memdesc:aa46dc6199f1eea119fd8dd52d9adf4f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">When to publish next in periodic mode. Compare to System.millis().  <br /></td></tr>
<tr class="separator:aa46dc6199f1eea119fd8dd52d9adf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3a4466ab1770e550a6d281c5052fda0" id="r_ab3a4466ab1770e550a6d281c5052fda0"><td class="memItemLeft" align="right" valign="top"><a id="ab3a4466ab1770e550a6d281c5052fda0" name="ab3a4466ab1770e550a6d281c5052fda0"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>locRequestId</b> = 1</td></tr>
<tr class="memdesc:ab3a4466ab1770e550a6d281c5052fda0"><td class="mdescLeft">&#160;</td><td class="mdescRight">loc events contain a request ID, this is the next one to use <br /></td></tr>
<tr class="separator:ab3a4466ab1770e550a6d281c5052fda0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-attribs" name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:ad35b4367af09326dcd9cf84e60dc4a72" id="r_ad35b4367af09326dcd9cf84e60dc4a72"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad35b4367af09326dcd9cf84e60dc4a72">_instance</a></td></tr>
<tr class="memdesc:ad35b4367af09326dcd9cf84e60dc4a72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Singleton instance of this class.  <br /></td></tr>
<tr class="separator:ad35b4367af09326dcd9cf84e60dc4a72"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class is a singleton; you do not create one as a global, on the stack, or with new.</p>
<p>From global application setup you must call: <a class="el" href="#a632cb3bb761719e876e6749e7f83fbee" title="Gets the singleton instance of this class, allocating it if necessary.">LocationFusionRK::instance()</a>.<a class="el" href="#ae3286ce07f8b3080f3e7382cf6d1660d" title="Perform setup operations; call this from global application setup()">setup()</a>; </p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="aa45c9ec7a5974e9d4eb277134ec5fe0b" name="aa45c9ec7a5974e9d4eb277134ec5fe0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa45c9ec7a5974e9d4eb277134ec5fe0b">&#9670;&#160;</a></span>PublishFrequency</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="#aa45c9ec7a5974e9d4eb277134ec5fe0b">LocationFusionRK::PublishFrequency</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>How often to publish location. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aa45c9ec7a5974e9d4eb277134ec5fe0ba3c78b35502b2693fefdfc51cba3a53a5" name="aa45c9ec7a5974e9d4eb277134ec5fe0ba3c78b35502b2693fefdfc51cba3a53a5"></a>manual&#160;</td><td class="fielddoc"><p>Only when requested. </p>
</td></tr>
<tr><td class="fieldname"><a id="aa45c9ec7a5974e9d4eb277134ec5fe0bae2eff6c2dafd909df8508f891b385d88" name="aa45c9ec7a5974e9d4eb277134ec5fe0bae2eff6c2dafd909df8508f891b385d88"></a>once&#160;</td><td class="fielddoc"><p>Once after connecting to the cloud. </p>
</td></tr>
<tr><td class="fieldname"><a id="aa45c9ec7a5974e9d4eb277134ec5fe0bae6ffdec5e14fce371eb7ae99edebbbee" name="aa45c9ec7a5974e9d4eb277134ec5fe0bae6ffdec5e14fce371eb7ae99edebbbee"></a>periodic&#160;</td><td class="fielddoc"><p>Periodically (period is configurable) </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="afdf4179c27be69b7e7b4b23a2f262854" name="afdf4179c27be69b7e7b4b23a2f262854"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdf4179c27be69b7e7b4b23a2f262854">&#9670;&#160;</a></span>LocationFusionRK() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">LocationFusionRK::LocationFusionRK </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The constructor is protected because the class is a singleton. </p>
<p>Use <a class="el" href="#a632cb3bb761719e876e6749e7f83fbee" title="Gets the singleton instance of this class, allocating it if necessary.">LocationFusionRK::instance()</a> to instantiate the singleton. </p>

</div>
</div>
<a id="a9243e6dd0fc2f53d3f187584196e908f" name="a9243e6dd0fc2f53d3f187584196e908f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9243e6dd0fc2f53d3f187584196e908f">&#9670;&#160;</a></span>LocationFusionRK() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">LocationFusionRK::LocationFusionRK </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp;</td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This class is a singleton and cannot be copied </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af79526582bb04bd28357e932cdd3f0d1" name="af79526582bb04bd28357e932cdd3f0d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af79526582bb04bd28357e932cdd3f0d1">&#9670;&#160;</a></span>functionHandler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int LocationFusionRK::functionHandler </td>
          <td>(</td>
          <td class="paramtype">const Variant &amp;</td>          <td class="paramname"><span class="paramname"><em>eventData</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called from the Particle.function handler for "cmd". </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">eventData</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int</dd></dl>
<p>Calls commandHandlers, added with withCmdHandler. </p>

</div>
</div>
<a id="af6d35d19c2321cee9bf030b96dad83c4" name="af6d35d19c2321cee9bf030b96dad83c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6d35d19c2321cee9bf030b96dad83c4">&#9670;&#160;</a></span>functionHandlerStatic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int LocationFusionRK::functionHandlerStatic </td>
          <td>(</td>
          <td class="paramtype">String</td>          <td class="paramname"><span class="paramname"><em>cmd</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called from the Particle.function handler for "cmd". </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int</dd></dl>
<p>Parses cmd as JSON and the calls the non-static functionHandler. </p>

</div>
</div>
<a id="a6fe57c4e11fd7b62e0d9da344b8d7d4d" name="a6fe57c4e11fd7b62e0d9da344b8d7d4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fe57c4e11fd7b62e0d9da344b8d7d4d">&#9670;&#160;</a></span>getPublishFrequency()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#aa45c9ec7a5974e9d4eb277134ec5fe0b">PublishFrequency</a> LocationFusionRK::getPublishFrequency </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the current publish frequency. Default is manual. </p>
<dl class="section return"><dt>Returns</dt><dd>PublishFrequency </dd></dl>

</div>
</div>
<a id="a632cb3bb761719e876e6749e7f83fbee" name="a632cb3bb761719e876e6749e7f83fbee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a632cb3bb761719e876e6749e7f83fbee">&#9670;&#160;</a></span>instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp; LocationFusionRK::instance </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the singleton instance of this class, allocating it if necessary. </p>
<p>Use <a class="el" href="#a632cb3bb761719e876e6749e7f83fbee" title="Gets the singleton instance of this class, allocating it if necessary.">LocationFusionRK::instance()</a> to instantiate the singleton. </p>

</div>
</div>
<a id="af2f111aec7b2af98c576870c7e88f515" name="af2f111aec7b2af98c576870c7e88f515"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2f111aec7b2af98c576870c7e88f515">&#9670;&#160;</a></span>locEnhanced()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void LocationFusionRK::locEnhanced </td>
          <td>(</td>
          <td class="paramtype">const Variant &amp;</td>          <td class="paramname"><span class="paramname"><em>eventData</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when a "loc-enhanced" cmd function is received. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">eventData</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>Calls locEnhancedHandlers. </p>

</div>
</div>
<a id="ae940bc78655511814de1e883d0156dfb" name="ae940bc78655511814de1e883d0156dfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae940bc78655511814de1e883d0156dfb">&#9670;&#160;</a></span>locEnhancedStatic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void LocationFusionRK::locEnhancedStatic </td>
          <td>(</td>
          <td class="paramtype">const Variant &amp;</td>          <td class="paramname"><span class="paramname"><em>eventData</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when a "loc-enhanced" cmd function is received. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">eventData</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>This just calls the non-static method with the singleton instance. </p>

</div>
</div>
<a id="a383b25eb9fab626ea3be28036f27c78d" name="a383b25eb9fab626ea3be28036f27c78d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a383b25eb9fab626ea3be28036f27c78d">&#9670;&#160;</a></span>lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void LocationFusionRK::lock </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Locks the mutex that protects shared resources. </p>
<p>This is compatible with <code>WITH_LOCK(*this)</code>.</p>
<p>The mutex is not recursive so do not lock it within a locked section. </p>

</div>
</div>
<a id="a4a7ac263c0d90bba2c37a1637c7ab050" name="a4a7ac263c0d90bba2c37a1637c7ab050"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a7ac263c0d90bba2c37a1637c7ab050">&#9670;&#160;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp; LocationFusionRK::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp;</td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This class is a singleton and cannot be copied </p>

</div>
</div>
<a id="a74a14902b67f73f700ea8984588046b3" name="a74a14902b67f73f700ea8984588046b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74a14902b67f73f700ea8984588046b3">&#9670;&#160;</a></span>requestPublish()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void LocationFusionRK::requestPublish </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Request a publish now. </p>
<p>Works in all modes (manual, once, and periodic). Can be called when offline; it will only be calculated when connected to the cloud (breathing cyan). </p>

</div>
</div>
<a id="ae3286ce07f8b3080f3e7382cf6d1660d" name="ae3286ce07f8b3080f3e7382cf6d1660d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3286ce07f8b3080f3e7382cf6d1660d">&#9670;&#160;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LocationFusionRK::setup </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform setup operations; call this from global application <a class="el" href="#ae3286ce07f8b3080f3e7382cf6d1660d" title="Perform setup operations; call this from global application setup()">setup()</a> </p>
<p>You typically use <a class="el" href="#a632cb3bb761719e876e6749e7f83fbee" title="Gets the singleton instance of this class, allocating it if necessary.">LocationFusionRK::instance()</a>.<a class="el" href="#ae3286ce07f8b3080f3e7382cf6d1660d" title="Perform setup operations; call this from global application setup()">setup()</a>;</p>
<p>Typically you use all of the withXXX() functions before setup. </p>

</div>
</div>
<a id="a7b030c426ea722da6b308456a0148a98" name="a7b030c426ea722da6b308456a0148a98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b030c426ea722da6b308456a0148a98">&#9670;&#160;</a></span>stateBuildPublish()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void LocationFusionRK::stateBuildPublish </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Internal state handler for building a publish. </p>
<p>May be in this state for a while, but the state handlers are run from a worker thread so it won't affect operation of the rest of the system typically.</p>
<p>Exit conditions:</p><ul>
<li>When publish begins -&gt; statePublishWait </li>
</ul>

</div>
</div>
<a id="a8c3a416dd4740cb296ae7c1160b17564" name="a8c3a416dd4740cb296ae7c1160b17564"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c3a416dd4740cb296ae7c1160b17564">&#9670;&#160;</a></span>stateConnected()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void LocationFusionRK::stateConnected </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Internal state handler for connected to the cloud. </p>
<p>Exit conditions:</p><ul>
<li>Particle.connected() return false -&gt; stateIdle</li>
<li>It's time to publish a location -&gt; stateBuildPublish </li>
</ul>

</div>
</div>
<a id="ae1df19422c23ef16c507e892f075771e" name="ae1df19422c23ef16c507e892f075771e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1df19422c23ef16c507e892f075771e">&#9670;&#160;</a></span>stateIdle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void LocationFusionRK::stateIdle </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Internal state handler for idle and not connected to the cloud. </p>
<p>Exit conditions:</p><ul>
<li>Particle.connected() return true -&gt; stateConnected </li>
</ul>

</div>
</div>
<a id="a44fa7eb853ebc65e7f0cebab693d6a67" name="a44fa7eb853ebc65e7f0cebab693d6a67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44fa7eb853ebc65e7f0cebab693d6a67">&#9670;&#160;</a></span>statePublishWait()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void LocationFusionRK::statePublishWait </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Internal state handler for waiting for the publish to complete. </p>
<p>Exit conditions:</p><ul>
<li>When publish completes -&gt; stateConnected</li>
</ul>
<p>May set</p><ul>
<li>manualPublishRequested (set to false on success)</li>
<li>publishCount (increments on success)</li>
<li>nextPublishMs increased by either publishPeriod or publishFailureRetry </li>
</ul>

</div>
</div>
<a id="ae2383f534b6d500ae979ab994ab3df5d" name="ae2383f534b6d500ae979ab994ab3df5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2383f534b6d500ae979ab994ab3df5d">&#9670;&#160;</a></span>threadFunction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">os_thread_return_t LocationFusionRK::threadFunction </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Worker thread function. </p>
<p>This method is called to perform operations in the worker thread.</p>
<p>You generally will not return from this method. </p>

</div>
</div>
<a id="a1c394f8103493e13f361085c31bbbc0f" name="a1c394f8103493e13f361085c31bbbc0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c394f8103493e13f361085c31bbbc0f">&#9670;&#160;</a></span>tryLock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool LocationFusionRK::tryLock </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Attempts to lock the mutex that protects shared resources. </p>
<dl class="section return"><dt>Returns</dt><dd>true if the mutex was locked or false if it was busy already. </dd></dl>

</div>
</div>
<a id="a34e181d49b3d20d64eb44ac2124fa8d7" name="a34e181d49b3d20d64eb44ac2124fa8d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34e181d49b3d20d64eb44ac2124fa8d7">&#9670;&#160;</a></span>withAddToEventHandler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp; LocationFusionRK::withAddToEventHandler </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; void(Variant &amp;<a class="el" href="#a50aee379b3a94af0ab1649d60b46968f">eventData</a>, Variant &amp;locVariant)&gt;</td>          <td class="paramname"><span class="paramname"><em>handler</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add an "add to event" handler. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handler</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a>&amp;</dd></dl>
<p>The "add to event" handler allows you to add data to the loc event. You might do this if you want to support a cellular modem that has built-in GNSS, or use an external GNSS receiver.</p>
<p>The handler can be a C function or C++11 lambda and has the following prototype:</p>
<p>void handler(Variant &amp;eventData, Variant &amp;locVariant)</p>
<ul>
<li>eventData is the whole loc event</li>
<li>locVariant is the Variant for the inner loc object </li>
</ul>

</div>
</div>
<a id="a7b68a745a1785282803db05f630fd294" name="a7b68a745a1785282803db05f630fd294"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b68a745a1785282803db05f630fd294">&#9670;&#160;</a></span>withAddTower()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp; LocationFusionRK::withAddTower </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>enable</em><span class="paramdefsep"> = </span><span class="paramdefval">true</span></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add serving cellular tower information to the loc event. Default is false. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">enable</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a>&amp;</dd></dl>
<p>This can be called on devices without cellular (P2, for example) and it will be ignored. </p>

</div>
</div>
<a id="a7eca9c5b034b4143de9c95ef8a316dd8" name="a7eca9c5b034b4143de9c95ef8a316dd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7eca9c5b034b4143de9c95ef8a316dd8">&#9670;&#160;</a></span>withAddWiFi()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp; LocationFusionRK::withAddWiFi </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>enable</em><span class="paramdefsep"> = </span><span class="paramdefval">true</span></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add Wi-Fi access points nearby to the loc event. Default is false. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">enable</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a>&amp;</dd></dl>
<p>This can be called on devices without Wi-Fi (B-SoM, for example) and it will be ignored. </p>

</div>
</div>
<a id="a44dae3b646645b8eb162e7b1a33ed12f" name="a44dae3b646645b8eb162e7b1a33ed12f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44dae3b646645b8eb162e7b1a33ed12f">&#9670;&#160;</a></span>withCmdHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp; LocationFusionRK::withCmdHandler </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>cmd</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; void(const Variant &amp;data)&gt;</td>          <td class="paramname"><span class="paramname"><em>handler</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a handler when the Particle function "cmd" is received. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td></td></tr>
    <tr><td class="paramname">handler</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a>&amp;</dd></dl>
<p>Your handler is called when the "cmd" field within the function JSON matches.</p>
<p>The handler can be a C function or C++11 lambda. The prototype is: </p>

</div>
</div>
<a id="a7eb11317b27c7177160883245a2ed08c" name="a7eb11317b27c7177160883245a2ed08c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7eb11317b27c7177160883245a2ed08c">&#9670;&#160;</a></span>withLocEnhancedHandler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp; LocationFusionRK::withLocEnhancedHandler </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; void(const Variant &amp;data)&gt;</td>          <td class="paramname"><span class="paramname"><em>handler</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a handler when loc-enhanced data is calculated by the cloud. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handler</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a>&amp;</dd></dl>
<p>The handler prototype is:</p>
<p>void handler(const Variant &amp;data);</p>
<p>Fields typically in data in the handler:</p><ul>
<li>h_acc horizontal accuracy (meters)</li>
<li>lat latitude</li>
<li>lon longitude</li>
</ul>
<p>If you do not add a handler, the loc-enhanced data is not sent to the device. Handling loc-enhanced data locally on device adds one data operation. </p>

</div>
</div>
<a id="a82b57c739d7e61b12fdb3c9533b20b20" name="a82b57c739d7e61b12fdb3c9533b20b20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82b57c739d7e61b12fdb3c9533b20b20">&#9670;&#160;</a></span>withPublishManual()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp; LocationFusionRK::withPublishManual </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the publish frequency to manual. Call <a class="el" href="#a74a14902b67f73f700ea8984588046b3" title="Request a publish now.">requestPublish()</a> to do so. This is the default. </p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a>&amp; </dd></dl>

</div>
</div>
<a id="a2a5992b6ec9e8b024f0311800b1d084b" name="a2a5992b6ec9e8b024f0311800b1d084b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a5992b6ec9e8b024f0311800b1d084b">&#9670;&#160;</a></span>withPublishOnce()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp; LocationFusionRK::withPublishOnce </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the publish frequency to publish once after connecting to the cloud. </p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a>&amp; </dd></dl>

</div>
</div>
<a id="a535ed2c03358f337256ccb406c7531fa" name="a535ed2c03358f337256ccb406c7531fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a535ed2c03358f337256ccb406c7531fa">&#9670;&#160;</a></span>withPublishPeriodic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> &amp; LocationFusionRK::withPublishPeriodic </td>
          <td>(</td>
          <td class="paramtype">std::chrono::milliseconds</td>          <td class="paramname"><span class="paramname"><em>ms</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the publish frequency to publish periodically when cloud connected. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ms</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a>&amp;</dd></dl>
<p>Even though the parameter is in milliseconds, you probably shouldn't publish more often than every few minutes.</p>
<p>If you are using location fusion on a non-Tracker device it costs 50 data operations per fusion request, so doing location fusion frequently on the free plan may cause your account to be paused due to running out of data operations. </p>

</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a id="ad35b4367af09326dcd9cf84e60dc4a72" name="ad35b4367af09326dcd9cf84e60dc4a72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad35b4367af09326dcd9cf84e60dc4a72">&#9670;&#160;</a></span>_instance</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_location_fusion_r_k.html">LocationFusionRK</a> * LocationFusionRK::_instance</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Singleton instance of this class. </p>
<p>The object pointer to this class is stored here. It's NULL at system boot. </p>

</div>
</div>
<a id="a43eb87aa2e5a709abf7c92400590dada" name="a43eb87aa2e5a709abf7c92400590dada"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43eb87aa2e5a709abf7c92400590dada">&#9670;&#160;</a></span>addToEventHandlers</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::function&lt;void(Variant &amp;<a class="el" href="#a50aee379b3a94af0ab1649d60b46968f">eventData</a>, Variant &amp;locVariant)&gt; LocationFusionRK::addToEventHandlers) </td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Vector of handlers to add more information to the location event. </p>
<p>Add using <a class="el" href="#a34e181d49b3d20d64eb44ac2124fa8d7" title="Add an &quot;add to event&quot; handler.">withAddToEventHandler()</a>. You can add multiple handlers. </p>

</div>
</div>
<a id="ac8c5ff303ac42e46642235fd96a576e2" name="ac8c5ff303ac42e46642235fd96a576e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8c5ff303ac42e46642235fd96a576e2">&#9670;&#160;</a></span>addTower</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool LocationFusionRK::addTower = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>When building a location publish, add serving tower information. </p>
<p>Default is false, set uskng <a class="el" href="#a7b68a745a1785282803db05f630fd294" title="Add serving cellular tower information to the loc event. Default is false.">withAddTower()</a>. </p>

</div>
</div>
<a id="adf4ef5320b3453433656573eca5e2dce" name="adf4ef5320b3453433656573eca5e2dce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf4ef5320b3453433656573eca5e2dce">&#9670;&#160;</a></span>addWiFi</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool LocationFusionRK::addWiFi = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>When building a location publish, add Wi-Fi access point information. </p>
<p>Default is false, set uskng <a class="el" href="#a7eca9c5b034b4143de9c95ef8a316dd8" title="Add Wi-Fi access points nearby to the loc event. Default is false.">withAddWiFi()</a>. </p>

</div>
</div>
<a id="aa193b030f51eb82a0007b218bb0aa3d4" name="aa193b030f51eb82a0007b218bb0aa3d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa193b030f51eb82a0007b218bb0aa3d4">&#9670;&#160;</a></span>enableCmdFunction</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool LocationFusionRK::enableCmdFunction = true</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a function handler for "cmd". </p>
<p>This is enabled by default and must be enabled for loc-enhanced on device to work. </p>

</div>
</div>
<a id="aa085ddc212e9c9b1350786e6308e18ea" name="aa085ddc212e9c9b1350786e6308e18ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa085ddc212e9c9b1350786e6308e18ea">&#9670;&#160;</a></span>manualPublishRequested</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool LocationFusionRK::manualPublishRequested = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>true when a manual publish has been requested </p>
<p>This can be requested when offline as it will be handled when online. This can also be used in once and periodic modes to publish npw, out of schedule. </p>

</div>
</div>
<a id="a633e5a7b022b24538bb78ad5a3147158" name="a633e5a7b022b24538bb78ad5a3147158"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a633e5a7b022b24538bb78ad5a3147158">&#9670;&#160;</a></span>mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">os_mutex_t LocationFusionRK::mutex = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mutex to protect shared resources. </p>
<p>This is initialized in <a class="el" href="#ae3286ce07f8b3080f3e7382cf6d1660d" title="Perform setup operations; call this from global application setup()">setup()</a> so make sure you call the <a class="el" href="#ae3286ce07f8b3080f3e7382cf6d1660d" title="Perform setup operations; call this from global application setup()">setup()</a> method from the global application setup. </p>

</div>
</div>
<a id="aa46dc6199f1eea119fd8dd52d9adf4f9" name="aa46dc6199f1eea119fd8dd52d9adf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa46dc6199f1eea119fd8dd52d9adf4f9">&#9670;&#160;</a></span>nextPublishMs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t LocationFusionRK::nextPublishMs = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>When to publish next in periodic mode. Compare to System.millis(). </p>
<p>Since this is a uint64_t it does not roll over so comparisons are easier. </p>

</div>
</div>
<a id="a8c267d646bf8b2255b776c9303a398fd" name="a8c267d646bf8b2255b776c9303a398fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c267d646bf8b2255b776c9303a398fd">&#9670;&#160;</a></span>thread</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Thread* LocationFusionRK::thread = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Worker thread instance class. </p>
<p>This is initialized in <a class="el" href="#ae3286ce07f8b3080f3e7382cf6d1660d" title="Perform setup operations; call this from global application setup()">setup()</a> so make sure you call the <a class="el" href="#ae3286ce07f8b3080f3e7382cf6d1660d" title="Perform setup operations; call this from global application setup()">setup()</a> method from the global application setup. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="_location_fusion_r_k_8h_source.html">LocationFusionRK.h</a></li>
<li>src/<b>LocationFusionRK.cpp</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
